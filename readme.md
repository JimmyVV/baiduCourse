##总结
&emsp;经过3天的晚上，完成了leader布置任务的1/3。 ): 心塞~
&emsp;说一下这3天的任务经过吧~.
###First Day
&emsp;第一天，上午10:02分，leader的QQ头像一闪一闪，我的心跳也一闪一闪。因为有前几次面试的经历，所以那时候的心甚虚~。 

	上个面试官说:leader问的比我的都细，所以你准备下口粮吧~
&emsp;准备着又被虐一顿的心态，打开了QQ。 心情平静了许多。一下是对话:

	leader:hu,xx你好~
    me: leader,您好~
    leader: 最近还有课吗？
    me: 有，到了考试月~
    ...

&emsp;小伙子，你以为Leader和你来拉家常的吗？**too young too naive**
&emsp;接下来leader开始说任务了，我简单的说一下吧~
	
	1.爬去某网站的课程信息
	2.查看购买金额
	3.补充: 可按日期查询
&emsp;好吧，题目已经出了，那就just do it;<br/>
**干货时间**<br/>
&emsp;首先,拿到这个题目的时候，第一反应就是爬数据，好吧，虽然没有太多的经验，但还是勉强有些思路。不过,我的*plan*是先将基本展示的html做好.

这是我的目录结构:
![](./mdImg/content.jpg)

**用到的知识点有:**

	构建自动化工具:gulp
    打包工具:webpack
    编写css: sass
    js:使用es6的基本语法
    ...
当然里面还有更细的东西~
第一天建好这些工程目录也就差不多了. 基本框架也搭好了，然后开始构思爬数据的思路。这时候，脑袋里回想起leader说的话. <按日期查询> 这时候，差不多晚上10点了，虽然有点迷茫，但还是硬着头皮想了一下。 是不是有路由给你呢？ 对~按这个思路继续走下去。这时候我默默打开了，某网站，开启控制台，查看Source，进入的相应的js文件。 (Ps:好多啊~). 
&emsp;没事，既然想要面试鹅厂，就应该拿出我不通宵谁通宵的气魄。找啊找啊找啊找~ 发现有一个js文件很可疑，默默的关注了他。每次刷新的时候，看着他做了些什么。结果，他的确发送了一些请求，可是都不是我要的~(Ps:凌晨3:02). 实在困，作罢~
###Second Day
&emsp;好吧\~我承认，我的锅。需求没有问清楚，盲目的做~. 结果是,**曲线救国**.<br/>
&emsp;那么，想什么，赶紧做~<br/>
&emsp;想了想该怎么做到数据的爬取~ 大致思路应该是，发送请求，处理内容，获取数据，再发送。大致流程应该是这样的。<br/>
&emsp;用到的库有:superagent和cheerio(两个都是爬数据用的库)<br/>
&emsp;打开某网站，看看一下基本的目录结构，发现还是有一定的规律可以寻的。我的思路是:首先获取全部目录的titles和链接数目=>根据获得的第一手数据,开始进行遍历发送,获取不同title的课程总数+他的chlildren等.<br/>
(这里没有获取课程的总金额,算是自我降低KPI吧)
###Third Day
&emsp;由于在获取数据的时候，总是会出现发送请求数太多的问题，所以稳定性也是相当差的。在第三天的时候，对获取的代码进行了优化，引入了eventproxy这个库，用来控制发送的次数.优化完毕后，打开控制台，尝试了一下，基本上抓取数据应该没有什么问题.(目前，没有发生什么问题).然后写了一些逻辑和异步发送请求的数据。最后通过模板展示到页面上.<br/>
###Fourth Day
&emsp;*Tired\~Tired\~Tired. *<br/>
&emsp;重要的事情说三遍，我只想说，我尽力了。这4天来，加班加点，优化\~优化\~优化. 可是结果还是不是很理想。 总结一下原因吧:<br/>
	&emsp;1. 对后台基础知识掌握不牢，特别在写数据处理的时候，由于没有合适的工具调试，导致的结果是在找bug的时间上耗时太多.使用的也只是原生的js+mongodb的处理方式。I/O 时，通过eventpoxy进行控制，防止发生发送请求过多，监听出现问题，比如 can't read xxx property of undefined. 所以由于这个原因，导致写法的复杂度陡然增加。 ): (没办法，还是那句话，既然来面试鹅厂，就应该有一种你不死，谁死的感觉)<br/>
	2. 思维架构没有搭建好. 前几天，仔细分析了xx课程的官网，发现有一些规律可以寻。我是以href+date为索引进行获取. (一开始挺好的哈~ )可到后面陡然发现，在链接里面，一级目录和二级目录如果是一一对应的关系的话，他们的链接是一样的.比如:   ==更多考试=>学历教育==   当时我的心拔凉拔凉的。 没关系，这只是个个例，先忽略它，继续往下走。 其中有一个点，关于如何计算上架数，和下架数，这让我有点郁闷。 大致分析一下思路吧:  <br/>
	首先， VIP上架数 = 新增VIP课程+免费转付费 ;<br/>
    	 免费上架数 = 新增免费课程+VUP转免费;<br/>
         VIP下架数 = 下架课程 + VIP转免费;<br/>
         免费下架数 = 下架课程 + 免费转为VIP；<br/>
         是不是很晕~没错我也是，里面用到到一些数学概念. 交集，并集和差集<br/>
         ex: A = VIP数 交 昨天的VIP数 ...<br/>
&emsp;最后，说一下收获的东西吧，1.对数据库的操作有了一些基本认识。 2.对于爬数据的流程以及思路有了一次深刻的锻炼。3.对于js的异步处理，状态的监听，也收获了一些写法。 4.能在自己的代码中用上一点数学知识了 :) 5.以后一定要好好学习，打好基础。

